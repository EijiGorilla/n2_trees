"use strict";(self.webpackChunkn2_trees=self.webpackChunkn2_trees||[]).push([[2720],{51750:(t,e,n)=>{n.d(e,{$d:()=>r,Lr:()=>s,v3:()=>o,v8:()=>i});const o=15.5,r=4,i=64,s=1024},84328:(t,e,n)=>{n.d(e,{Ht:()=>o,QS:()=>s,jL:()=>i});const o=8388607,r=8388608,i=t=>t&o;function s(t,e){return((e?r:0)|t)>>>0}},43119:(t,e,n)=>{var o;n.d(e,{E5:()=>f,NE:()=>d,l_:()=>o}),function(t){t.Local="Local",t.Global="Global"}(o||(o={}));class r{generateSource(t){const e=[];for(let o=1;o<this.length;o++)e.push("vec4 atom".concat(o," = texture(").concat(t.animationTexture,", (pointer + 0.5) / size);")),e.push("pointer.x += 1.0;");for(let o=0;o<this.ins;o++)e.push("top--;"),e.push("vec4 in".concat(this.ins-o-1," = stack[top];"));for(let o=0;o<this.outs;o++)e.push("vec4 out".concat(o,";"));const{microcode:n}=this;for(const o of n)e.push(o);for(let o=0;o<this.outs;o++)e.push("stack[top] = out".concat(o,";")),e.push("top++;"),e.push("if (top >= ".concat(h,") { top = ").concat(h-1,"; }"));return e}}let i=128;function s(t){return["float duration = clamp(".concat(t.duration,", 0.05, 3600.0);"),"float startTimeOffset = ".concat(t.startTimeOffset,";"),"float repeatDelay = ".concat(t.repeatDelay,";"),"float timeOriginSelector = ".concat(t.timeOriginSelector,";"),"float repeatType = ".concat(t.repeatType,";"),"float easing = ".concat(t.easing,";"),"float playAnimation = ".concat(t.playAnimation," * (1.0 - step(0.0, -").concat(t.duration,"));"),"float reverseAnimation = ".concat(t.reverseAnimation,";"),"float time = globalTime - (timeOriginSelector == 1.0 ? localTimeOrigin : 0.0);","time *= playAnimation;","time *= 1.0 - reverseAnimation * 2.0;","float period = duration + repeatDelay;","time += reverseAnimation == 1.0 ? (period - startTimeOffset - 0.001) : startTimeOffset + 0.001;","float omega = time / period;","float oi = floor(omega);","omega = repeatType == 1.0 || repeatType == 3.0 ? omega - oi : omega;","float of = omega * period;","of = (clamp(of, reverseAnimation * repeatDelay, period - (1.0 - reverseAnimation) * repeatDelay) - reverseAnimation * repeatDelay) / duration;","of = easing == 2.0 ? pow(of, 3.0) : of;","of = easing == 3.0 ? 1.0 - pow(1.0 - of, 3.0) : of;","of = easing == 4.0 ? of < 0.5 ? 4.0 * pow(of, 3.0) : 1.0 - pow(-2.0 * of + 2.0, 3.0) / 2.0 : of;","bool oscillate = repeatType == 3.0 && mod(oi, 2.0) == 1.0;","".concat(t.out," = oscillate ? 1.0 - of : of;")]}const a={Linear:1,EaseIn:2,EaseOut:3,EaseInOut:4},c={Loop:1,None:2,Oscillate:3},l={Local:1,Global:2};function u(t){const e=a[t.easing],n=c[t.repeatType],o=l[t.timeOriginSelector];return[[t.duration,t.startTimeOffset,t.repeatDelay,o],[n,e,t.playAnimation,t.reverseAnimation]]}const d={scalar:new class extends r{constructor(){super(...arguments),this.opcode=++i,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.y, atom0.y, atom0.y, atom0.y);"]}encode(t){return[[this.opcode,t,0,0]]}},vector3:new class extends r{constructor(){super(...arguments),this.opcode=++i,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.yzw, 0.0);"]}encode(t){return[[this.opcode,t[0]||0,t[1]||0,t[2]||0]]}},vector4:new class extends r{constructor(){super(...arguments),this.opcode=++i,this.length=2,this.ins=0,this.outs=1,this.microcode=["out0 = atom1;"]}encode(t){return[[this.opcode,0,0,0],t]}},animatedTransform:new class extends r{constructor(){super(...arguments),this.opcode=++i,this.length=10,this.ins=1,this.outs=1,this.microcode=["vec2 fromTranslation = atom1.xy;","vec2 toTranslation = atom1.zw;","float fromRotation = atom2.x;","float toRotation = atom2.y;","float fromScale = atom2.z;","float toScale = atom2.w;","bool relativeTranslation = atom9.x == 1.0;","bool absoluteScale = atom9.y == 1.0;","vec2 translationMultiplier = relativeTranslation ? pixelDimensions : vec2(1.0, 1.0);","float scaleDivisor = absoluteScale ? pixelDimensions.y : 1.0;","float fTranslation;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fTranslation"}),"}","float fRotation;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fRotation"}),"}","float fScale;","{",...s({duration:"atom7.x",startTimeOffset:"atom7.y",repeatDelay:"atom7.z",timeOriginSelector:"atom7.w",repeatType:"atom8.x",easing:"atom8.y",playAnimation:"atom8.z",reverseAnimation:"atom8.w",out:"fScale"}),"}","vec2 aTranslation = mix(fromTranslation, toTranslation, fTranslation);","float aRotation = mix(fromRotation, toRotation, fRotation);","float aScale = mix(fromScale, toScale, fScale);","vec2 pTranslation = in0.xy;","float pRotation = in0.z;","float pScale = in0.w;","aTranslation *= translationMultiplier;","aScale /= scaleDivisor;","float rotation = pRotation + aRotation;","float scale = pScale * aScale;","float sin1 = sin(pRotation);","float cos1 = cos(pRotation);","float s1 = pScale;","float x1 = pTranslation.x;","float y1 = pTranslation.y;","float x2 = aTranslation.x;","float y2 = aTranslation.y;","\n    vec2 translation = vec2(\n      cos1 * s1 * x2 - sin1 * s1 * y2 + x1,\n      sin1 * s1 * x2 + cos1 * s1 * y2 + y1\n    );\n    ","out0 = vec4(translation, rotation, scale);"]}encode(t){return[[this.opcode,0,0,0],[t.translation.from[0],t.translation.from[1],t.translation.to[0],t.translation.to[1]],[t.rotation.from,t.rotation.to,t.scale.from,t.scale.to],...u(t.translation.timing),...u(t.rotation.timing),...u(t.scale.timing),[t.relativeTranslation?1:0,t.absoluteScale?1:0,0,0]]}},animatedColor:new class extends r{constructor(){super(...arguments),this.opcode=++i,this.length=7,this.ins=1,this.outs=1,this.microcode=["float fromOpacity = atom0.y;","float toOpacity = atom0.z;","vec4 fromColor = atom1;","vec4 toColor = atom2;","float fColor;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fColor"}),"}","float fOpacity;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fOpacity"}),"}","vec4 aColor = mix(fromColor, toColor, fColor);","aColor.a *= mix(fromOpacity, toOpacity, fOpacity);","vec4 pColor = in0;","out0 = aColor * pColor;"]}encode(t){return[[this.opcode,t.opacity.from,t.opacity.to,0],[t.color.from[0],t.color.from[1],t.color.from[2],t.color.from[3]],[t.color.to[0],t.color.to[1],t.color.to[2],t.color.to[3]],...u(t.color.timing),...u(t.opacity.timing)]}},ret:new class extends r{constructor(){super(...arguments),this.opcode=++i,this.length=1,this.ins=0,this.outs=0,this.microcode=["break;"]}encode(){return[[this.opcode,0,0,0]]}}},p=40,h=4;function f(t){const e=[];e.push("float globalTime = ".concat(t.globalTime,";")),e.push("float localTimeOrigin = ".concat(t.localTimeOrigin,";")),e.push("vec2 pointer = ".concat(t.animationPointer,";")),e.push("vec2 size = ".concat(t.animationTextureSize,";")),e.push("int top = 0;"),e.push("vec4 stack[".concat(h,"];")),e.push("for (int counter = 0; counter < ".concat(p,"; counter++) {")),e.push("vec4 atom0 = texture(".concat(t.animationTexture,", (pointer + 0.5) / size);")),e.push("pointer.x += 1.0;"),e.push("vec2 pixelDimensions = ".concat(t.pixelDimensions,";")),e.push("if (false) {");for(const n in d){const o=d[n];e.push("} else if (int(atom0.x) == ".concat(o.opcode,") {"));for(const n of o.generateSource(t))e.push(n)}return e.push("} // End if-else."),e.push("} // End for."),e.push("".concat(t.out," = top > 0 ? stack[top - 1] : vec4(0.0);")),e.join("\n")}},73325:(t,e,n)=>{n.d(e,{yu:()=>k,XB:()=>K,Qt:()=>M,ri:()=>R,oo:()=>E,Pz:()=>P,Ou:()=>A,qH:()=>N,xh:()=>U,Kw:()=>D,e5:()=>C});var o=n(27366),r=(n(93169),n(32718)),i=n(643),s=n(10064),a=n(99340),c=n(97731);class l{constructor(){this._includedModules=new Map}include(t,e){this._includedModules.has(t)?this._includedModules.get(t):(this._includedModules.set(t,e),t(this.builder,e))}}class u extends l{constructor(){super(...arguments),this.vertex=new h,this.fragment=new h,this.attributes=new f,this.varyings=new y,this.extensions=new m,this.constants=new v}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.extensions.generateSource(t),o=this.attributes.generateSource(t),r=this.varyings.generateSource(t),i="vertex"===t?this.vertex:this.fragment,s=i.uniforms.generateSource(),a=i.code.generateSource(),c="vertex"===t?g:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif\n",l=this.constants.generateSource().concat(i.constants.generateSource());return"".concat(e?"#version 300 es":"","\n").concat(n.join("\n"),"\n").concat(c,"\n").concat(l.join("\n"),"\n").concat(s.join("\n"),"\n").concat(o.join("\n"),"\n").concat(r.join("\n"),"\n").concat(a.join("\n"))}generateBindPass(t){const e=new Map;this.vertex.uniforms.entries.forEach((t=>{const n=t.bind[a.P.Pass];n&&e.set(t.name,n)})),this.fragment.uniforms.entries.forEach((t=>{const n=t.bind[a.P.Pass];n&&e.set(t.name,n)}));const n=Array.from(e.values()),o=n.length;return(e,r)=>{for(let i=0;i<o;++i)n[i](t,e,r)}}generateBindDraw(t){const e=new Map;this.vertex.uniforms.entries.forEach((t=>{const n=t.bind[a.P.Draw];n&&e.set(t.name,n)})),this.fragment.uniforms.entries.forEach((t=>{const n=t.bind[a.P.Draw];n&&e.set(t.name,n)}));const n=Array.from(e.values()),o=n.length;return(e,r,i)=>{for(let s=0;s<o;++s)n[s](t,i,e,r)}}}class d{constructor(){this._entries=new Map}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const o of e)this._add(o)}get(t){return this._entries.get(t)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new s.Z("Duplicate uniform name ".concat(t.name," for different uniform type"));this._entries.set(t.name,t)}else r.Z.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder").error("Trying to add null Uniform from ".concat((new Error).stack,"."))}generateSource(){return Array.from(this._entries.values()).map((t=>null!=t.arraySize?"uniform ".concat(t.type," ").concat(t.name,"[").concat(t.arraySize,"];"):"uniform ".concat(t.type," ").concat(t.name,";")))}get entries(){return Array.from(this._entries.values())}}class p{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class h extends l{constructor(){super(...arguments),this.uniforms=new d,this.code=new p,this.constants=new v}get builder(){return this}}class f{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>"in ".concat(t[1]," ").concat(t[0],";")))}}class y{constructor(){this._entries=new Map}add(t,e){this._entries.has(t)&&(0,c.hu)(this._entries.get(t)===e),this._entries.set(t,e)}generateSource(t){const e=new Array;return this._entries.forEach(((n,o)=>e.push("vertex"===t?"out ".concat(n," ").concat(o,";"):"in ".concat(n," ").concat(o,";")))),e}}class m{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?m.ALLOWLIST_VERTEX:m.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>e.includes(t))).map((t=>"#extension ".concat(t," : enable")))}}m.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],m.ALLOWLIST_VERTEX=[];class v{constructor(){this._entries=new Set}add(t,e,n){let o="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":o=v._numberToFloatStr(n);break;case"int":o=v._numberToIntStr(n);break;case"bool":o=n.toString();break;case"vec2":o="vec2(".concat(v._numberToFloatStr(n[0]),",                            ").concat(v._numberToFloatStr(n[1]),")");break;case"vec3":o="vec3(".concat(v._numberToFloatStr(n[0]),",                            ").concat(v._numberToFloatStr(n[1]),",                            ").concat(v._numberToFloatStr(n[2]),")");break;case"vec4":o="vec4(".concat(v._numberToFloatStr(n[0]),",                            ").concat(v._numberToFloatStr(n[1]),",                            ").concat(v._numberToFloatStr(n[2]),",                            ").concat(v._numberToFloatStr(n[3]),")");break;case"ivec2":o="ivec2(".concat(v._numberToIntStr(n[0]),",                             ").concat(v._numberToIntStr(n[1]),")");break;case"ivec3":o="ivec3(".concat(v._numberToIntStr(n[0]),",                             ").concat(v._numberToIntStr(n[1]),",                             ").concat(v._numberToIntStr(n[2]),")");break;case"ivec4":o="ivec4(".concat(v._numberToIntStr(n[0]),",                             ").concat(v._numberToIntStr(n[1]),",                             ").concat(v._numberToIntStr(n[2]),",                             ").concat(v._numberToIntStr(n[3]),")");break;case"mat2":case"mat3":case"mat4":o="".concat(e,"(").concat(Array.prototype.map.call(n,(t=>v._numberToFloatStr(t))).join(", "),")")}return this._entries.add("const ".concat(e," ").concat(t," = ").concat(o,";")),this}static _numberToIntStr(t){return t.toFixed(0)}static _numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const g="precision highp float;\nprecision highp sampler2D;";var b=n(52995);function w(t,e,n){const o=e.split("\n");for(const r of o)if(r.trim().length){{let e="";null!=n&&(e+="/*id:".concat(null!==n&&void 0!==n?n:"000","*/   ")),t.body+=e.padEnd(14)}t.body+=" ".repeat(t.indent)+r+"\n"}}class x{write(t){for(const e of t.rootOutputNodes())t.shouldPruneOutputNode(e)||(e.variableName=this._write(t,e.node));return t}_createVarName(t,e){let n="";return"boolean"!=typeof e&&"number"!=typeof e&&e.debugInfo.name&&(n="".concat(e.debugInfo.name,"_")),"".concat(n,"v").concat(t.varCount++)}_write(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof e)return e.toString();if("boolean"==typeof e)return e.toString();let o=t.getEmit(e);if(o)return o;switch(e.shaderType){case"scope-node":o=this._writeScopeNode(t,e);break;case"primitive-node":o=this._writePrimitiveNode(t,e,n);break;case"function-node":o=this._writeFunctionNode(t,e);break;case"property-access-node":o=this._writePropertyAccessNode(t,e);break;case"text-node":o=e.text;break;case"block-node":o=this._writeBlockNode(t,e);break;case"condition-node":o=this._writeConditionNode(t,e)}return t.setEmit(e,o),o}_writeScopeNode(t,e){const n=new e.child.constructor;n.setDebugName(e.debugInfo.name);const o=this._write(t,n,!0);return w(t,"{ /*ScopeStart: ".concat(e.uid," ").concat(e.debugInfo.name,"*/")),t.indent+=2,w(t,"".concat(o," = ").concat(this._write(t,e.child),";")),t.indent-=2,w(t,"} /*ScopeEnd: ".concat(e.uid," ").concat(e.debugInfo.name,"*/")),o}_writeConditionNode(t,e){const n=new e.ifTrue.constructor,o=this._write(t,n,!0);w(t,"if (".concat(this._write(t,e.condition),") {")),t.indent+=2;const r=t.createSubgraphContext(),i=this._write(r,e.ifTrue);if(t.body+=r.body,i&&w(t,"".concat(o," = ").concat(i,";")),t.indent-=2,w(t,"}"),e.ifFalse){w(t,"else {"),t.indent+=2;const n=t.createSubgraphContext(),r=this._write(n,e.ifFalse);t.body+=n.body,r&&w(t,"".concat(o," = ").concat(r,";")),t.indent-=2,w(t,"}")}return o}_writeBlockNode(t,e){const{captureList:n,generator:o,returnType:r}=e,i={};for(const l in n){if(!n[l])continue;const e=this._write(t,n[l]);i[l]=e}const s=new r,a=this._write(t,s,!0);if(i.out=a,e.subgraph){const n=t.createSubgraphContext(),o=this._write(n,e.subgraph.child),r=n.body;i.subgraph={varName:o,body:r}}const c=o(i);return w(t,"{\n"),t.indent+=2,w(t,c),t.indent-=2,w(t,"}\n"),a}_writePropertyAccessNode(t,e){const n=this._write(t,e.target);return"string"==typeof e.property&&e.property.includes("[")?"".concat(n).concat(e.property):"string"!=typeof e.property?"".concat(n,"[").concat(this._write(t,e.property),"]"):"".concat(n,".").concat(e.property)}_writeFunctionNode(t,e){const n=e.returnType.type;if(e.isInfix){const[o,r]=e.children.map((e=>this._write(t,e))),i=this._createVarName(t,e);return w(t,"".concat(n.padEnd(5)," ").concat(i," = ").concat(o," ").concat(e.token," ").concat(r,";"),e.uid),i}const o=e.children.map((e=>this._write(t,e))).join(", "),r=this._createVarName(t,e);return w(t,"".concat(n.padEnd(5)," ").concat(r," = ").concat(e.token,"(").concat(o,");"),e.uid),r}_writePrimitiveNode(t,e){var n;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.getInput(e);if(r)return r.isUsed=!0,r.variableName;const i=1===e.children.length&&(null===(n=e.children[0])||void 0===n?void 0:n.type)===e.type;if(e.isImplicit||i)return this._write(t,e.children[0]);const s=this._createVarName(t,e);if(o)return w(t,"".concat(e.type.padEnd(5)," ").concat(s,";"),e.uid),s;const a=!e.debugInfo.name&&!e.isMutable;if(a&&"float"===e.type&&"number"==typeof e.children[0])return Number.isInteger(e.children[0])?e.children[0].toFixed(1):e.children[0].toString();if(a&&"int"===e.type&&"number"==typeof e.children[0]&&Number.isInteger(e.children[0]))return e.children[0].toString();const c=e.children.map((e=>this._write(t,e))).join(", ");return"array"===e.type?(w(t,"".concat(e.type.padEnd(5)," ").concat(s," = [").concat(c,"];"),e.uid),s):a?"".concat(e.type,"(").concat(c,")"):(w(t,"".concat(e.type.padEnd(5)," ").concat(s," = ").concat(e.type,"(").concat(c,");"),e.uid),s)}}var _=n(23105);class S{constructor(t,e,n){this.variableName=t,this.variableInputType=e,this.node=n,this.type="shader-input",this.isUsed=!1}clone(){return new S(this.variableName,this.variableInputType,(0,_.UV)(this.node))}}class T{constructor(t,e,n){this.outVariableName=t,this.outVariableType=e,this.node=n,this.type="shader-output"}clone(){const t=new T(this.outVariableName,this.outVariableType,(0,_.UV)(this.node));return t.variableName=this.variableName,t}}class V{static createVertex(t,e,n,o,r,i){const s=[];for(const c in t){const e=t[c],o=n.get(c);o?s.push(new S(o,"builtin",e)):s.push(new S("a_"+c,"in",e))}for(const c of o){const t=c.uniformHydrated;s.push(new S(c.uniformName,"uniform",t))}const a=[];for(const c in e){const t=e[c];"glPosition"===c?a.push(new T("gl_Position","builtin",t)):"glPointSize"===c?a.push(new T("gl_PointSize","builtin",t)):a.push(new T("v_"+c,"out",t))}return new V(s,a,r,i)}static createFragment(t,e,n,o,r,i){const s=[],a=Array.from(r.rootOutputNodes());for(const l in t){const e=t[l],o=n.get(l);if(o){s.push(new S(o,"builtin",e));continue}const r=a.find((t=>t.node===e));r&&s.push(new S(r.outVariableName,"in",e))}for(const l of o){const t=l.uniformHydrated;s.push(new S(l.uniformName,"uniform",t))}const c=[];for(const l in e){const t=e[l],o=n.get(l);"discard"===l?c.push(new T(null,"discard",t)):o?c.push(new T(o,"builtin",t)):c.push(new T(l,"out",t))}return new V(s,c,i)}constructor(t,e,n,o){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const r of t)this._inputShaderTypesByNodeUid.set(r.node.uid,r);this._outputShaderTypes=e,this._transformFeedbackBindings=n,this._transformFeedbackNames=new Set(n.map((t=>"v_"+t.propertyKey))),this._usedInFragmentShader=o}shouldPruneOutputNode(t){return!!this._usedInFragmentShader&&"builtin"!==t.outVariableType&&!this._transformFeedbackNames.has(t.outVariableName)&&!this._usedInFragmentShader.has(t.node.uid)}setEmit(t,e){this._nodeEmitMap.set(t.uid,e)}getEmit(t){return this._nodeEmitMap.get(t.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(t){return this._inputShaderTypesByNodeUid.get(t.uid)}*rootOutputNodes(){for(const t of this._outputShaderTypes)yield t}*nodes(){const t=[];for(const e of this._outputShaderTypes.values())t.push(e.node);for(;t.length;){const e=t.pop();"number"!=typeof e&&"boolean"!=typeof e&&t.push(...e.children.filter(Boolean)),yield e}}*nodesOfTypeOrFunction(){for(const t of this.nodes())"number"!=typeof t&&"boolean"!=typeof t&&(yield t)}createSubgraphContext(){const t=this.clone();return t.body="",t.indent=this.indent+2,t._nodeEmitMap=new Map(this._nodeEmitMap),t}clone(){const t=new V([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return t._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,t.indent=this.indent,t.body=this.body,t.varCount=this.varCount,t._nodeEmitMap=this._nodeEmitMap,t}insertVertexShader(t){t.vertex.code.add(""),this._insertInputs(t,"vertex"),t.vertex.code.add(""),t.vertex.code.add("// OUTPUTS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this.rootOutputNodes()){const n="builtin"===e.outVariableType;this.shouldPruneOutputNode(e)||(n?t.vertex.code.add("// ".concat(e.outVariableType.padEnd(7)," ").concat(e.node.type.padEnd(9)," ").concat(e.outVariableName,";")):t.vertex.code.add("".concat(e.outVariableType.padEnd(10)," ").concat(e.node.type.padEnd(9)," ").concat(e.outVariableName,";")))}t.vertex.code.add(""),t.vertex.code.add("void main() {"),t.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const e of this.rootOutputNodes())this.shouldPruneOutputNode(e)||t.vertex.code.add("  ".concat(e.outVariableName," = ").concat(e.variableName,";"));t.vertex.code.add("}")}insertFragmentShader(t){this._insertInputs(t,"fragment"),t.fragment.code.add(""),t.fragment.code.add("// OUTPUTS: "),t.fragment.code.add("// --------------------------------------------------------- ");for(const e of this.rootOutputNodes())"builtin"===e.outVariableType?t.fragment.code.add("// ".concat(e.outVariableType.padEnd(7)," ").concat(e.node.type.padEnd(9)," ").concat(e.outVariableName,";")):t.fragment.code.add("".concat(e.outVariableType.padEnd(10)," ").concat(e.node.type.padEnd(9)," ").concat(e.outVariableName,";"));t.fragment.code.add(""),t.fragment.code.add("void main() {"),t.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const e of this.rootOutputNodes())"discard"===e.outVariableType?(t.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),t.fragment.code.add("  if (".concat(e.variableName,") {")),t.fragment.code.add("    discard;"),t.fragment.code.add("  }"),t.fragment.code.add("  ")):t.fragment.code.add("  ".concat(e.outVariableName," = ").concat(e.variableName,";"));t.fragment.code.add("}")}_insertInputs(t,e){t[e].code.add("// INPUTS: "),t[e].code.add("// --------------------------------------------------------- ");for(const n of this.inputs())n.isUsed&&"builtin"!==n.variableInputType&&("array"===n.node.type?t[e].code.add("".concat(n.variableInputType.padEnd(10)," ").concat(n.node.elementType.type.padEnd(9)," ").concat(n.variableName,"[").concat(n.node.size,"];")):t[e].code.add("".concat(n.variableInputType.padEnd(10)," ").concat(n.node.type.padEnd(9)," ").concat(n.variableName,";")))}}var I=n(19407);function O(t){return new t}function z(t,e,n){var o;const r=null!==(o=t.constructor[e])&&void 0!==o?o:[];t.constructor.hasOwnProperty(e)||Object.defineProperty(t.constructor,e,{value:r.slice()}),t.constructor[e].push(n)}function U(t,e){return(n,o)=>{z(n,"locations",{typeCtor:e,propertyKey:o,parameterIndex:null,index:t})}}const N=t=>(e,n,o)=>{z(e,"inputs",{inputCtor:t,propertyKey:n,parameterIndex:o})},C=t=>(e,n)=>{z(e,"uniforms",{typeCtor:t,propertyKey:n})},D=t=>(e,n)=>{z(e,"options",{typeCtor:t,propertyKey:n})},A=(t,e)=>{z(t,"defines",{propertyKey:e})};const F=(t,e)=>(n,o)=>{n.constructor.builtins.push({builtin:t,propertyKey:o,typeCtor:e})};class P{}P.builtins=[],(0,o._)([F("gl_VertexID",b.J7)],P.prototype,"glVertexID",void 0);class k{}class K{}K.builtins=[],(0,o._)([F("gl_FragCoord",b.T8)],K.prototype,"glFragCoord",void 0),(0,o._)([F("gl_PointCoord",b.Sg)],K.prototype,"glPointCoord",void 0);class M{}class E{constructor(){this.type="uniform-group"}get _uniforms(){var t;return null!==(t=this.constructor.uniforms)&&void 0!==t?t:[]}}class R{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&0===t.parameterIndex));if(!t)throw new Error("Unable to find vertex input parameter");return t}get computeInput(){return this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&1===t.parameterIndex))}get fragmentInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"fragment"===t.propertyKey));if(!t)throw new Error("Unable to find fragment input parameter");return t}get transformFeedbackBindings(){var t;return null!==(t=this.fragmentInput.inputCtor.transformFeedbackBindings)&&void 0!==t?t:[]}get locations(){var t,e;return[...this.vertexInput.inputCtor.locations,...null!==(t=null===(e=this.computeInput)||void 0===e?void 0:e.inputCtor.locations)&&void 0!==t?t:[]]}get locationsMap(){const t=new Map,e=new Set;for(const n of this.locations)e.has(n.index)?r.Z.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering","Unable to assigned attribute ".concat(n.propertyKey," to ").concat(n.index,". Index already in use"),{locationsMap:t}):(t.set(n.propertyKey,n.index),e.add(n.index));return t}get locationInfo(){if(!this._locationInfo){const t=this.locationsMap,e=Array.from(t.entries()).map((t=>{let[e,n]=t;return"".concat(e,".").concat(n)})).join("."),n=(0,i.hP)(e),o=this.computeAttributes;this._locationInfo={hash:n,locations:t,computeAttributeMap:o}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const e of this.locations)t.set("a_"+e.propertyKey,e.index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set;for(const e of this._options)t.add(e.propertyKey);this._optionPropertyKeys=t}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){var t;return null!==(t=this._shaderModuleClass.defines)&&void 0!==t?t:[]}get _options(){var t;return null!==(t=this._shaderModuleClass.options)&&void 0!==t?t:[]}get _uniforms(){var t;return null!==(t=this._shaderModuleClass.uniforms)&&void 0!==t?t:[]}getProgram(t,e,n,o){try{const{vertex:r,fragment:i,uniformBindings:s}=this._generateShaders(t,e,n,o);return new I.X(r,i,this.renamedLocationsMap,this.locationInfo,s,this.transformFeedbackBindings)}catch(r){return new I.X("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(t){const e=this._options.find((e=>e.propertyKey===t));if(e)return{type:"option",className:e.typeCtor};const n=this._uniforms.find((e=>e.propertyKey===t));if(!n)throw new Error("Unable to find uniform class type for property: ".concat(t));return{type:"required",className:n.typeCtor}}getShaderKey(t,e,n,o){const r=Object.keys(t).map((e=>"".concat(e,".").concat(t[e]))).join("."),i=Object.keys(n).map((t=>"".concat(t,".").concat(n[t]))).join("."),s=Object.keys(o).map((t=>"".concat(t,".").concat(o[t]))).join("."),a=Object.keys(e).filter((t=>this.optionPropertyKeys.has(t)&&e[t])).join(".");return"".concat(this.constructor.name,".").concat(r,".").concat(i,".").concat(s,".").concat(a)}_generateShaders(t,e,n,o){const r=[];this._setDefines(n),this._setOptionalUniforms(r,e),this._setRequiredUniforms(r);const i=this._hydrateVertexInput(o),s=this._injectPackPrecisionFactor(i,t),a=this._hydrateComputeInput(),c=a&&this._injectComputePackPrecisionFactor(a,t),l=this.vertex(s,c),u=this._hydrateFragmentInput(l),d=this.fragment(u),p=new Set;for(const w in d){const t=d[w];(0,_.Q0)(p,t)}const h=this._getVertexInputBuiltins(),f=V.createVertex({...i,...a},l,h,r,this.transformFeedbackBindings,p);(new x).write(f);const y=this._getFragmentInputBuiltins(d);y.set("glPointCoord","gl_PointCoord");const m=V.createFragment(u,d,y,r,f,this.transformFeedbackBindings);(new x).write(m);const v=this._createShaderBuilder(f,m),g=v.generate("vertex",!0),b=v.generate("fragment",!0);return this.logShader&&(console.log(g),console.log(b)),{vertex:g,fragment:b,uniformBindings:r}}_setDefines(t){for(const e in t)this[e]=t[e]}_setOptionalUniforms(t,e){for(const n of this._options)e[n.propertyKey]?this[n.propertyKey]=this._hydrateUniformGroup(t,n):this[n.propertyKey]=null}_setRequiredUniforms(t){for(const e of this._uniforms)this[e.propertyKey]=this._hydrateUniformGroup(t,e)}_hydrateUniformGroup(t,e){const n=new(0,e.typeCtor);for(const r of null!==(o=n._uniforms)&&void 0!==o?o:[]){var o;const i=O(r.typeCtor),s="u_".concat(e.propertyKey,"_").concat(r.propertyKey),a=i.type,c=[e.propertyKey,r.propertyKey].join(".");if("type"in r.typeCtor&&"array"===r.typeCtor.type){const e=i;t.push({shaderModulePath:c,uniformName:s,uniformType:a,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:i})}else t.push({shaderModulePath:c,uniformName:s,uniformType:a,uniformHydrated:i});n[r.propertyKey]=i}return n}_hydrateVertexInput(t){const e=this.vertexInput.inputCtor,n=e.locations.reduce(((e,n)=>!1===t[n.propertyKey]?e:{...e,[n.propertyKey]:O(n.typeCtor)}),{});for(const{propertyKey:o,typeCtor:r}of e.builtins){const t=O(r);n[o]=t}return n}_hydrateComputeInput(){return null==this.computeInput?null:this.computeInput.inputCtor.locations.reduce(((t,e)=>({...t,[e.propertyKey]:O(e.typeCtor)})),{})}_injectPackPrecisionFactor(t,e){const n={};for(const o in t){const r=t[o],i=e[o];if(i){if("float"!==r.type&&"vec2"!==r.type&&"vec3"!==r.type&&"vec4"!==r.type)throw new Error("InternalError: packPrecisionFactor requires GenType, but found ".concat(r.type));n[o]=r.divide(new b.bv(i))}else n[o]=r}return n}_injectComputePackPrecisionFactor(t,e){const n={},o=new Map;for(const i in this.computeAttributes)for(const t of null!==(r=this.computeAttributes[i])&&void 0!==r?r:[]){var r;o.set(t,i)}for(const i in t){const r=t[i],s=o.get(i);if(!s)continue;const a=e[s];if(a){if("float"!==r.type&&"vec2"!==r.type&&"vec3"!==r.type&&"vec4"!==r.type)throw new Error("InternalError: packPrecisionFactor requires GenType, but found ".concat(r.type));n[i]=r.divide(new b.bv(a))}else n[i]=r}return n}_hydrateFragmentInput(t){const e={};for(const n in t)e[n]=t[n];for(const{propertyKey:n,typeCtor:o}of K.builtins){const t=O(o);e[n]=t}return e}_getVertexInputBuiltins(){const t=this.vertexInput.inputCtor,e=new Map;for(const{builtin:n,propertyKey:o}of t.builtins)e.set(o,n);return e}_getFragmentInputBuiltins(t){const e=t.constructor,n=new Map;for(const r of null!==(o=e.builtins)&&void 0!==o?o:[]){var o;n.set(r.propertyKey,r.builtin)}return n}_createShaderBuilder(t,e){const n=new u;return this._insertDebugInfo(n),t.insertVertexShader(n),e.insertFragmentShader(n),n}_insertDebugInfo(t){t.vertex.code.add("// DEFINES: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._defines)this[e.propertyKey]?t.vertex.code.add("//   ".concat(e.propertyKey,": true")):t.vertex.code.add("//   ".concat(e.propertyKey,": false"));t.vertex.code.add(""),t.vertex.code.add("// OPTIONS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._options)this[e.propertyKey]?t.vertex.code.add("//   ".concat(e.propertyKey,": true")):t.vertex.code.add("//   ".concat(e.propertyKey,": false"))}}},23105:(t,e,n)=>{function o(t,e){const n=[];for(n.push(e);n.length;){const e=n.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)n.push(t)}}}n.d(e,{Q0:()=>o,UV:()=>i,Yo:()=>l,Ys:()=>d,h9:()=>s,lJ:()=>u,rK:()=>c});class r{constructor(){this.uid=r.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(t){return t=function(t){return t.split(" ").map(((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t)).join("")}(t),this._debugName=t,this.isImplicit&&this.children[0]instanceof r&&this.children[0].setDebugName(t),this}get debugInfo(){var t;return{name:null!==(t=this._debugName)&&void 0!==t?t:""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function i(t){return"object"==typeof t?t.clone():t}r.NodeCount=0;class s extends r{constructor(){super(...arguments),this.shaderType="primitive-node"}}class a extends r{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new a(i(this.child));return this.cloneInto(t),t}}class c extends r{constructor(t,e,n){super(),this.property=t,this.target=e,this.returnType=n,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new c(this.property,i(this.target),this.returnType);return this.cloneInto(t),t}}class l extends r{constructor(t,e,n){super(),this.condition=t,this.ifTrue=e,this.ifFalse=n,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=i(this.ifTrue),e=this.ifFalse?i(this.ifFalse):null,n=new l(this.condition,t,e);return this.cloneInto(n),n}}class u extends r{constructor(t,e,n,o){super(),this.captureList=t,this.returnType=e,this.generator=o,this.shaderType="block-node",n&&(this.subgraph=new a(n))}get children(){var t;return Object.keys(this.captureList).map((t=>this.captureList[t])).concat(null!==(t=this.subgraph)&&void 0!==t?t:[])}clone(){const t={};for(const n in this.captureList)t[n]=i(this.captureList[n]);const e=new u(t,this.returnType,this.subgraph?i(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class d extends r{constructor(t,e,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(),this.token=t,this._children=e,this.isInfix=n,this.isPropertyAccess=o,this.returnType=r,this.isTernary=i,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new d(this.token,this._children.map(i),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}},52995:(t,e,n)=>{n.d(e,{AK:()=>zt,AO:()=>I,B6:()=>ut,CD:()=>Ft,CW:()=>Ht,Dg:()=>dt,Eg:()=>S,Fp:()=>Dt,Fv:()=>kt,GW:()=>Ut,Ge:()=>ot,Iz:()=>yt,J7:()=>K,Jp:()=>st,K4:()=>G,KJ:()=>rt,NM:()=>Et,Nb:()=>qt,O$:()=>Rt,Qj:()=>ft,R3:()=>Z,Sg:()=>V,T8:()=>O,TE:()=>Ot,Tu:()=>L,VV:()=>At,Wn:()=>wt,ZI:()=>Nt,_b:()=>Lt,bv:()=>T,e$:()=>j,ff:()=>Kt,fz:()=>W,hk:()=>H,hx:()=>pt,ig:()=>Bt,kE:()=>Ct,ln:()=>ht,mC:()=>It,mD:()=>Tt,or:()=>gt,r7:()=>vt,sQ:()=>Mt,tS:()=>mt,tW:()=>D,tk:()=>nt,uZ:()=>Vt,v8:()=>_,vh:()=>J,wO:()=>Q,wQ:()=>Pt,wV:()=>it,xD:()=>bt,yb:()=>q,z4:()=>St});var o,r,i,s,a,c,l,u,d,p,h,f,y,m,v=n(27366),g=n(23105);function b(t){return new Proxy(t,{get(e,n){if("constructor"===n)return new Proxy(e.constructor,{construct:(t,e,n)=>b(new t(...e))});if(n in e)return e[n];if("string"==typeof n){const e=function(t){const e=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of e)if(n.includes(t))return n.map((t=>B[t]));throw new Error("Unable to find type family")}(t.type);return Y(t,n,e[n.length-1])}}})}function w(t){return new Proxy(t,{construct:(t,e,n)=>b(new t(...e))})}class x extends Error{}let _=o=class extends g.h9{constructor(t,e){super(),this.elementType=t,this.size=e,this.children=[],this.type="array"}clone(){const t=new o(this.elementType,this.size);return super.cloneInto(t),t}get(t){if("number"==typeof t){const e=new K(t);return e.isImplicit=!0,Y(this,e,this.elementType.constructor)}return Y(this,t,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(t,e,n){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.size;const r=new K(n).setMutable().setDebugName("FindIndexIterator"),i=e(t.get(r)).setDebugName("FindIndexPredicate"),s=ot({iter:r},K,i,(t=>{let{out:e,iter:n,subgraph:r}=t;return"\n".concat(e," = -1;\n\nfor (; ").concat(n," < ").concat(o,"; ").concat(n,"++) {\n\n").concat(r.body,"\n\n  if (").concat(r.varName,") {\n    ").concat(e," = ").concat(n,";\n    break;\n  }\n\n}\n")})).setDebugName("FindIndexBlock");return s}(this,t,e,n)}glslFindIndex(t,e,n){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.size;const r=ot({array:t},K,null,(t=>{let{out:r,array:i}=t;return"\n".concat(r," = -1;\nfor (int i = ").concat(n,"; i < ").concat(o,"; i++) {\n  bool condition;\n  ").concat(e({array:i,i:"i",out:"condition"}),"\n  if (condition) {\n    ").concat(r," = i;\n    break;\n  }\n}\n")})).setDebugName("GlslFindIndexBlock");return r}(this,t,e,n)}static ofType(t,e){const n={construct:(n,r)=>new o(new t,e)};return new Proxy(o,n)}};_.type="array",_=o=(0,v._)([function(t){return new Proxy(t,{construct:(t,e,n)=>function(t){return new Proxy(t,{get(e,n){if(n in e)return e[n];if("string"==typeof n){const e=parseInt(n,10);if(!isNaN(e))return Y(t,"[".concat(e,"]"),t.elementType.constructor)}}})}(new t(...e))})}],_);class S extends g.h9{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}clone(){const t=new S;return t.children=this.children.map(g.UV),super.cloneInto(t),t}}S.type="sampler2D";class T extends g.h9{constructor(t){super(),this.type="float",this.children=[t]}clone(){const t=new T((0,g.UV)(this.children[0]));return super.cloneInto(t),t}multiply(t){return st(this,"number"==typeof t?P(t,T):t)}divide(t){return at(this,"number"==typeof t?P(t,T):t)}add(t){return ct(this,"number"==typeof t?P(t,T):t)}subtract(t){return lt(this,"number"==typeof t?P(t,T):t)}}T.type="float";let V=r=class extends g.h9{constructor(t,e){super(),this.type="vec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new r((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]));return super.cloneInto(t),t}get 0(){return Y(this,"[0]",T)}get 1(){return Y(this,"[1]",T)}get 2(){throw new x}get 3(){throw new x}multiply(t){return st(this,"number"==typeof t?P(t,T):t)}divide(t){return at(this,"number"==typeof t?P(t,T):t)}add(t){return ct(this,"number"==typeof t?P(t,T):t)}subtract(t){return lt(this,"number"==typeof t?P(t,T):t)}};V.type="vec2",V=r=(0,v._)([w],V);let I=i=class extends g.h9{constructor(t,e,n){super(),this.type="vec3",this.children=[t,e,n].filter((t=>null!=t))}get 0(){return Y(this,"[0]",T)}get 1(){return Y(this,"[1]",T)}get 2(){return Y(this,"[2]",T)}get 3(){throw new x}clone(){const t=new i((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]));return super.cloneInto(t),t}multiply(t){return st(this,"number"==typeof t?P(t,T):t)}divide(t){return at(this,"number"==typeof t?P(t,T):t)}add(t){return ct(this,"number"==typeof t?P(t,T):t)}subtract(t){return lt(this,"number"==typeof t?P(t,T):t)}};I.type="vec3",I=i=(0,v._)([w],I);let O=s=class extends g.h9{constructor(t,e,n,o){super(),this.type="vec4",this.children=[t,e,n,o].filter((t=>null!=t))}clone(){const t=new s((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]));return super.cloneInto(t),t}get 0(){return Y(this,"[0]",T)}get 1(){return Y(this,"[1]",T)}get 2(){return Y(this,"[2]",T)}get 3(){return Y(this,"[3]",T)}multiply(t){return st(this,"number"==typeof t?P(t,T):t)}divide(t){return at(this,"number"==typeof t?P(t,T):t)}add(t){return ct(this,"number"==typeof t?P(t,T):t)}subtract(t){return lt(this,"number"==typeof t?P(t,T):t)}};O.type="vec4",O=s=(0,v._)([w],O);let z=a=class extends g.h9{constructor(t){super(),this.type="uint",this.children=[t]}clone(){const t=new a((0,g.UV)(this.children[0]));return super.cloneInto(t),t}};z.type="uint",z=a=(0,v._)([w],z);let U=c=class extends g.h9{constructor(t,e){super(),this.type="uvec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new c((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]));return super.cloneInto(t),t}};U.type="uvec2",U=c=(0,v._)([w],U);let N=l=class extends g.h9{constructor(t,e,n){super(),this.type="uvec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new l((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]));return super.cloneInto(t),t}};N.type="uvec3",N=l=(0,v._)([w],N);let C=u=class extends g.h9{constructor(t,e,n,o){super(),this.type="uvec4",this.children=[t,e,n,o].filter((t=>null!=t))}clone(){const t=new u((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]));return super.cloneInto(t),t}};C.type="uvec4",C=u=(0,v._)([w],C);class D extends g.h9{constructor(t){super(),this.type="bool",this.children=[t]}and(t){return bt(this,t)}or(t){return gt(this,t)}clone(){const t=new D((0,g.UV)(this.children[0]));return super.cloneInto(t),t}}D.type="bool";let A=d=class extends g.h9{constructor(t,e){super(),this.type="bvec2",this.children=[t,e].filter((t=>null!=t))}all(){return xt(this)}any(){return _t(this)}clone(){const t=new d((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]));return super.cloneInto(t),t}};A.type="bvec2",A=d=(0,v._)([w],A);let F=p=class extends g.h9{constructor(t,e,n){super(),this.type="bvec3",this.children=[t,e,n].filter((t=>null!=t))}all(){return xt(this)}any(){return _t(this)}clone(){const t=new p((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]));return super.cloneInto(t),t}};function P(t,e){return"number"==typeof t?new e(t):t}F.type="bvec3",F=p=(0,v._)([w],F);let k=h=class extends g.h9{constructor(t,e,n,o){super(),this.type="bvec4",this.children=[t,e,n,o].filter((t=>null!=t))}all(){return xt(this)}any(){return _t(this)}clone(){const t=new h((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]));return super.cloneInto(t),t}};k.type="bvec4",k=h=(0,v._)([w],k);class K extends g.h9{constructor(t){super(),this.type="int",this.children=[t]}multiply(t){return st(this,P(t,K))}add(t){return ct(this,P(t,K))}subtract(t){return lt(this,P(t,K))}divide(t){return at(this,P(t,K))}clone(){const t=new K((0,g.UV)(this.children[0]));return super.cloneInto(t),t}}K.type="int";let M=f=class extends g.h9{constructor(t,e){super(),this.type="ivec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new f((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]));return super.cloneInto(t),t}};M.type="ivec2",M=f=(0,v._)([w],M);let E=y=class extends g.h9{constructor(t,e,n){super(),this.type="ivec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new y((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]));return super.cloneInto(t),t}};E.type="ivec3",E=y=(0,v._)([w],E);let R=m=class extends g.h9{constructor(t,e,n,o){super(),this.type="ivec4",this.children=[t,e,n,o].filter((t=>null!=t))}clone(){const t=new m((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]));return super.cloneInto(t),t}};R.type="ivec4",R=m=(0,v._)([w],R);class H extends g.h9{constructor(t,e,n,o){super(),this.type="mat2",this.children=[t,e,n,o]}clone(){const t=new H((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]));return super.cloneInto(t),t}multiply(t){return st(this,t)}}H.type="mat2";class L extends g.h9{static identity(){return new L(1,0,0,0,1,0,0,0,1)}static fromRotation(t){const e=Rt(t),n=It(t);return new L(n,e,0,nt(e),n,0,0,0,1)}constructor(t,e,n,o,r,i,s,a,c){super(),this.type="mat3",this.children=[t,e,n,o,r,i,s,a,c]}add(t){return ct(this,t)}multiply(t){return st(this,t)}clone(){const t=new L((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]),(0,g.UV)(this.children[4]),(0,g.UV)(this.children[5]),(0,g.UV)(this.children[6]),(0,g.UV)(this.children[7]),(0,g.UV)(this.children[8]));return super.cloneInto(t),t}}L.type="mat3";class q extends g.h9{static identity(){return new q(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(t,e,n,o,r,i,s,a,c,l,u,d,p,h,f,y){super(),this.type="mat4",this.children=[t,e,n,o,r,i,s,a,c,l,u,d,p,h,f,y]}static fromColumns(t,e,n,o){return new q(t.x,t.y,t.z,t.w,e.x,e.y,e.z,e.w,n.x,n.y,n.z,n.w,o.x,o.y,o.z,o.w)}multiply(t){return st(this,t)}clone(){const t=new q((0,g.UV)(this.children[0]),(0,g.UV)(this.children[1]),(0,g.UV)(this.children[2]),(0,g.UV)(this.children[3]),(0,g.UV)(this.children[4]),(0,g.UV)(this.children[5]),(0,g.UV)(this.children[6]),(0,g.UV)(this.children[7]),(0,g.UV)(this.children[8]),(0,g.UV)(this.children[9]),(0,g.UV)(this.children[10]),(0,g.UV)(this.children[11]),(0,g.UV)(this.children[12]),(0,g.UV)(this.children[13]),(0,g.UV)(this.children[14]),(0,g.UV)(this.children[15]));return super.cloneInto(t),t}}q.type="mat4";const B={float:T,vec2:V,vec3:I,vec4:O,int:K,ivec2:M,ivec3:E,ivec4:R,uint:z,uvec2:U,uvec3:N,uvec4:C,bool:D,bvec2:A,bvec3:F,bvec4:k},j=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new K(...e)},W=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new T(...e)},G=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new V(...e)},Z=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new I(...e)},J=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new O(...e)},Q=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new L(...e)};function Y(t,e,n){const o=new n(new g.rK(e,t,n));return o.isImplicit=!0,o}function $(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(o){const r=new o,i=new o(new g.Ys(t,[e,n],!0,!1,r));return i.isImplicit=!0,i}if("float"===e.type||"int"===e.type){const o=new n.constructor(new g.Ys(t,[e,n],!0,!1,n.constructor));return o.isImplicit=!0,o}if(("mat2"===e.type||"mat3"===e.type||"mat4"===e.type)&&"float"!==n.type){const o=new n.constructor(new g.Ys(t,[e,n],!0,!1,n.constructor));return o.isImplicit=!0,o}const r=new e.constructor(new g.Ys(t,[e,n],!0,!1,e.constructor));return r.isImplicit=!0,r}function X(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.constructor;const o=new n(new g.Ys(t,[e],!1,!1,n));return o.isImplicit=!0,o}function tt(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.constructor;const r=new o(new g.Ys(t,[e,n],!1,!1,o));return r.isImplicit=!0,r}function et(t,e,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.constructor;const i=new r(new g.Ys(t,[e,n,o],!1,!1,r));return i.isImplicit=!0,i}function nt(t){return st(t,W(-1))}function ot(t,e,n,o){return new e(new g.lJ(t,e,n,o))}function rt(t,e,n){const o="function"==typeof e?e():e,r="function"==typeof n?n():n,i=new o.constructor(new g.Yo(t,o,r));return i.isImplicit=!0,i}function it(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const o=e.map((t=>{let[e,n]=t;return"function"==typeof n?[e,n()]:[e,n]})),r=o[0][1].constructor,i=o.findIndex((t=>!0===t[0]));if(-1===i)throw new Error("A cond must have a fallthrough case with `true`/; ");const s=o.slice(0,i),a=o[i][1],c=new r(s.reduceRight(((t,e)=>rt(e[0],e[1],t)),a));return c.isImplicit=!0,c}function st(t,e){return $("*",t,e)}function at(t,e){return $("/",t,e)}function ct(t,e){return $("+",t,e)}function lt(t,e){return $("-",t,e)}function ut(t,e){return $("%",t,e)}function dt(t,e){return $(">>",t,e)}function pt(t,e){return $("&",t,e)}function ht(t,e){return $("==",t,e,D)}function ft(t,e){return $("<",t,e,D)}function yt(t,e){return $("<=",t,e,D)}function mt(t,e){return $(">",t,e,D)}function vt(t,e){return $(">=",t,e,D)}function gt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length<=1?e[0]:e.slice(1).reduce(((t,e)=>function(t,e){return $("||",t,e,D)}(t,e)),e[0])}function bt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length<=1?e[0]:e.slice(1).reduce(((t,e)=>function(t,e){return $("&&",t,e,D)}(t,e)),e[0])}function wt(t){return X("abs",t)}function xt(t){return X("all",t,D)}function _t(t){return X("any",t,D)}function St(t,e){return null==e?X("atan",t):tt("atan",t,e,t.constructor)}function Tt(t){return X("ceil",t)}function Vt(t,e,n){return et("clamp",t,e,n,t.constructor)}function It(t){return X("cos",t)}function Ot(t,e){return tt("distance",t,e,T)}function zt(t,e){return tt("dot",t,e,T)}function Ut(t){return X("floor",t)}function Nt(t){return X("fract",t)}function Ct(t){return X("length",t,T)}function Dt(t,e){return tt("max",t,e)}function At(t,e){return tt("min",t,e)}function Ft(t,e,n){return et("mix",t,e,n)}function Pt(t,e){return tt("mod",t,e)}function kt(t){return X("normalize",t)}function Kt(t){return"bool"===t.type?X("!",t):X("not",t)}function Mt(t,e){return tt("pow",t,e)}function Et(t){return X("round",t)}function Rt(t){return X("sin",t)}function Ht(t,e,n){return et("smoothstep",t,e,n)}function Lt(t){return X("sqrt",t)}function qt(t,e){return tt("step",t,e,e.constructor)}function Bt(t,e){return tt("texture",t,e,O)}},29660:(t,e,n)=>{var o;n.d(e,{t:()=>o}),function(t){t[t.AnimatedMarker=0]="AnimatedMarker",t[t.Blend=1]="Blend",t[t.ComplexFill=2]="ComplexFill",t[t.ComplexOutlineFill=3]="ComplexOutlineFill",t[t.DotDensity=4]="DotDensity",t[t.Fill=5]="Fill",t[t.Grid=6]="Grid",t[t.Heatmap=7]="Heatmap",t[t.Label=8]="Label",t[t.Line=9]="Line",t[t.Magnifier=10]="Magnifier",t[t.Marker=11]="Marker",t[t.OutlineFill=12]="OutlineFill",t[t.Overlay=13]="Overlay",t[t.PatternFill=14]="PatternFill",t[t.PatternOutlineFill=15]="PatternOutlineFill",t[t.PieChart=16]="PieChart",t[t.Test=17]="Test",t[t.Text=18]="Text",t[t.TexturedLine=19]="TexturedLine"}(o||(o={}))},70467:(t,e,n)=>{n.d(e,{m:()=>o});const o={bitset:{isSDF:0,isMapAligned:1,scaleSymbolsProportionally:2,overrideOutlineColor:3,colorLocked:4,isStroke:5}}},15135:(t,e,n)=>{n.d(e,{Ie:()=>m,RS:()=>f,fz:()=>y,HN:()=>h});var o=n(27366),r=n(94109),i=n(73325),s=n(52995),a=n(93169),c=n(34130);class l extends i.oo{getVisualVariableData(t){if(!this._vvData){const e=this.getAttributeDataCoords(t);this._vvData=(0,s.ig)(this.visualVariableData,e).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const e=(0,c.Wv)(t),n=this.size,o=(0,s.e$)(e.x),r=(0,s.e$)(e.y).multiply((0,s.e$)(256)),i=(0,s.e$)(e.z).multiply((0,s.e$)(256)).multiply((0,s.e$)(256)),a=(0,s.fz)(o.add(r).add(i)),l=(0,s.wQ)(a,n),u=a.subtract(l).divide(n);this._uv=new s.Sg(l,u).add(.5).divide(n)}return this._uv}getFilterData(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.filterFlags,e).setDebugName("storage0")}getAnimationData(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.animation,e).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.dataDriven0,e).setDebugName("storage30")}getDataDrivenData1(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.dataDriven1,e).setDebugName("storage31")}getDataDrivenData2(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.dataDriven2,e).setDebugName("storage32")}getGPGPUData(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.gpgpu,e).setDebugName("storage4")}getLocalTimeOrigin(t){const e=this.getAttributeDataCoords(t);return(0,s.ig)(this.localTimeOrigin,e).x.setDebugName("storage5")}getFilterFlags(t){return(0,a.Z)("webgl-ignores-sampler-precision")?(0,s.mD)(this.getFilterData(t).x.multiply((0,s.fz)(255))):this.getFilterData(t).x.multiply((0,s.fz)(255))}getLabelVisibility(t){const e=this.getFilterData(t).y.multiply(255);return new s.bv(1).subtract(e)}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"filterFlags",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"animation",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"gpgpu",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"localTimeOrigin",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"visualVariableData",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"dataDriven0",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"dataDriven1",void 0),(0,o._)([(0,i.e5)(s.Eg)],l.prototype,"dataDriven2",void 0),(0,o._)([(0,i.e5)(s.bv)],l.prototype,"size",void 0);class u extends i.oo{}(0,o._)([(0,i.e5)(s.bv)],u.prototype,"activeReasons",void 0),(0,o._)([(0,i.e5)(s.bv)],u.prototype,"highlightAll",void 0);class d extends i.oo{}(0,o._)([(0,i.e5)(s.Sg)],d.prototype,"position",void 0),(0,o._)([(0,i.e5)(s.bv)],d.prototype,"distance",void 0),(0,o._)([(0,i.e5)(s.bv)],d.prototype,"smallSymbolDistance",void 0),(0,o._)([(0,i.e5)(s.bv)],d.prototype,"smallSymbolSizeThreshold",void 0);var p=n(31060);class h extends i.Pz{}(0,o._)([(0,i.xh)(0,s.AO)],h.prototype,"id",void 0),(0,o._)([(0,i.xh)(1,s.bv)],h.prototype,"bitset",void 0),(0,o._)([(0,i.xh)(2,s.Sg)],h.prototype,"pos",void 0);class f extends i.yu{}(0,o._)([(0,i.xh)(14,s.Sg)],f.prototype,"nextPos1",void 0),(0,o._)([(0,i.xh)(15,s.Sg)],f.prototype,"nextPos2",void 0);class y extends i.XB{}class m extends i.ri{clip(t,e){let n=new s.bv(0);const o=this.storage.getFilterFlags(t);if(n=n.add((0,s.fz)(2).multiply((0,s.fz)(1).subtract((0,c.bG)(o,0)))),this.inside?n=n.add((0,s.fz)(2).multiply((0,s.fz)(1).subtract((0,c.bG)(o,1)))):this.outside?n=n.add((0,s.fz)(2).multiply((0,c.bG)(o,1))):this.highlight&&(n=n.add((0,s.fz)(2).multiply((0,s.fz)(1).subtract(this._checkHighlight(o))))),null!=e){const t=new s.bv(1).subtract((0,s.Nb)(e.x,this.view.currentZoom)),o=(0,s.Nb)(e.y,this.view.currentZoom);n=n.add(new s.bv(2).multiply(t.add(o)))}return n}getFragmentOutput(t,e){var n,o;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.bv(1/255);const a=new i.Qt;return a.glFragColor=null!==(n=null!==(o=this._maybeWriteHittest(e))&&void 0!==o?o:this._maybeHighlight(t,r))&&void 0!==n?n:t,a}_maybeHighlight(t,e){return this.highlight?new s.T8(t.rgb,(0,s.Nb)(e,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let n=1;n<r.IZ;n++)e=e.add(this._checkHighlightBit(t,n));return(0,s.Nb)(new s.bv(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,e){return(0,c.hG)(t,e).multiply((0,c.qD)(this.highlight.activeReasons,e))}maybeRunHittest(t,e,n){if(null==this.hittestRequest)return null;const o=this.hittest(t,e,n);let r=(0,s.KJ)((0,s.tS)(o,this.hittestRequest.distance),new s.bv(2),new s.bv(0));const i=this.storage.getAttributeDataCoords(t.id),a=(0,c.pK)(i);r=r.add(this.clip(t.id,t.zoomRange));const l=new s.T8(new s.bv(1/255),0,0,0);return{glPointSize:new s.bv(1),glPosition:new s.T8(a,r,1),color:l}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}(0,o._)([i.Ou],m.prototype,"inside",void 0),(0,o._)([i.Ou],m.prototype,"outside",void 0),(0,o._)([(0,i.Kw)(u)],m.prototype,"highlight",void 0),(0,o._)([(0,i.e5)(l)],m.prototype,"storage",void 0),(0,o._)([(0,i.e5)(p.C)],m.prototype,"view",void 0),(0,o._)([(0,i.Kw)(d)],m.prototype,"hittestRequest",void 0)},26837:(t,e,n)=>{n.d(e,{LU:()=>m,Oh:()=>y,YW:()=>f});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(17326),c=n(93787),l=n(23058),u=n(31571),d=n(34130);class p extends c.F{}(0,o._)([(0,r.xh)(5,i.T8)],p.prototype,"tlbr",void 0),(0,o._)([(0,r.xh)(6,i.bv)],p.prototype,"width",void 0),(0,o._)([(0,r.xh)(7,i.bv)],p.prototype,"height",void 0),(0,o._)([(0,r.xh)(8,i.Sg)],p.prototype,"offset",void 0),(0,o._)([(0,r.xh)(9,i.Sg)],p.prototype,"scale",void 0),(0,o._)([(0,r.xh)(10,i.bv)],p.prototype,"angle",void 0);class h extends s.fz{}function f(t,e){const n=t.view.requiredZoomFactor,o=new i.Sg(e.width,e.height),r=o.multiply(e.scale).multiply(n),s=e.angle.multiply(a.e4),c=(0,i.O$)(s),l=(0,i.mC)(s),u=function(t,e,n,o,r){const s=(0,i.ln)((0,d.qD)(r,a.Ux),(0,i.fz)(1)),c=(0,d.JH)(new i.T8(t,0));return(0,i.KJ)(s,(0,i.wO)(o.divide(e.x),n.divide(e.y),0,(0,i.tk)(n.divide(e.x)),o.divide(e.y),0,(0,d.TN)((0,i.K4)(c,0)),(0,d.TN)((0,i.K4)(0,c)),1),(0,i.wO)(o.divide(e.x),n.divide(e.y),0,(0,i.tk)(n.divide(e.x)),o.divide(e.y),0,0,0,1))}(e.id,r,c,l,e.bitset),p=t.localTileOffset.getPatternOffsetAtTileOrigin(o,c,l),h=n.multiply(e.scale).multiply(e.offset.subtract(p)).divide(r),f=new i.AO(e.pos,1),y=u.multiply(f).xy.subtract(h),m=e.tlbr.divide(t.mosaicInfo.size.xyxy);let v=(0,d.qD)(e.bitset,a.GS);return null!=t.visualVariableColor&&(v=(0,i.KJ)((0,d.In)(t.storage.getColorValue(e.id)),new i.bv(0),v)),{tileTextureCoord:y,tlbr:m,sampleAlphaOnly:v}}function y(t,e){const n=(0,i.wQ)(e.tileTextureCoord,new i.bv(1)),o=(0,i.CD)(e.tlbr.xy,e.tlbr.zw,n);let r=(0,i.ig)(t.mosaicInfo.texture,o);return r=(0,i.KJ)((0,i.tS)(e.sampleAlphaOnly,new i.bv(.5)),r.aaaa,r),e.color.multiply(r)}class m extends c.C{vertex(t,e){return{...super.vertex(t,e),...f(this,t)}}fragment(t){const e=y(this,t);return this.getFragmentOutput(e,t,new i.bv(0))}}(0,o._)([(0,r.e5)(u.N)],m.prototype,"mosaicInfo",void 0),(0,o._)([(0,r.e5)(l.H)],m.prototype,"localTileOffset",void 0),(0,o._)([(0,o.a)(0,(0,r.qH)(p)),(0,o.a)(1,(0,r.qH)(s.RS))],m.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(h))],m.prototype,"fragment",null)},78825:(t,e,n)=>{n.d(e,{$1:()=>f,NS:()=>m,Nz:()=>b});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(26837),c=n(19812),l=n(16661),u=n(23058),d=n(31571),p=n(48156),h=n(44461);const f=16,y=1/f,m=128;class v extends s.HN{}(0,o._)([(0,r.xh)(3,i.T8)],v.prototype,"color",void 0),(0,o._)([(0,r.xh)(4,i.T8)],v.prototype,"tlbr",void 0),(0,o._)([(0,r.xh)(5,i.bv)],v.prototype,"angle",void 0),(0,o._)([(0,r.xh)(6,i.bv)],v.prototype,"aux1",void 0),(0,o._)([(0,r.xh)(7,i.bv)],v.prototype,"aux2",void 0),(0,o._)([(0,r.xh)(8,i.Sg)],v.prototype,"aux3",void 0),(0,o._)([(0,r.xh)(9,i.Sg)],v.prototype,"aux4",void 0),(0,o._)([(0,r.xh)(10,i.Sg)],v.prototype,"zoomRange",void 0);class g extends h.K7{}class b extends p.VV{vertex(t,e){const{aux1:n,aux2:o,aux3:r,aux4:s}=t,c={...t,width:n,height:o,offset:r,scale:s.multiply(y)},l={...t,halfWidth:n,referenceHalfWidth:o,offset:r,normal:s.subtract(m).multiply(y)},u=(0,p.R0)(this,l),d=(0,a.YW)(this,c),h=(0,i.tS)(u.isOutline,new i.bv(.5));return{...u,...d,...this.maybeRunHittest(t,e,h)}}fragment(t){const{isOutline:e}=t,n=(0,i.tS)(e,new i.bv(.5)),o=(0,l.zj)(t,this.antialiasingControls.blur),r=(0,a.Oh)(this,t),s=(0,i.KJ)(n,o,r),c=(0,i.KJ)(n,new i.bv(1/255),new i.bv(0));return this.getFragmentOutput(s,t,c)}hittest(t,e,n){return(0,i.KJ)(n,(0,c.Oz)(this.hittestRequest),(0,c.CC)(this,t,e))}}(0,o._)([(0,r.e5)(d.N)],b.prototype,"mosaicInfo",void 0),(0,o._)([(0,r.e5)(u.H)],b.prototype,"localTileOffset",void 0),(0,o._)([(0,o.a)(0,(0,r.qH)(v)),(0,o.a)(1,(0,r.qH)(s.RS))],b.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(g))],b.prototype,"fragment",null)},93787:(t,e,n)=>{n.d(e,{C:()=>p,F:()=>d});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(19812),c=n(14294),l=n(72328),u=n(10750);class d extends s.HN{}(0,o._)([(0,r.xh)(3,i.T8)],d.prototype,"color",void 0),(0,o._)([(0,r.xh)(4,i.Sg)],d.prototype,"zoomRange",void 0);class p extends s.Ie{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const n=(0,u.sY)(this,t.id),o=(0,u.Zt)(this,t.id,t.color).multiply(n),r=this.view.displayViewScreenMat3.multiply(new i.AO(t.pos.xy,1)),s=this.clip(t.id,t.zoomRange);return{glPosition:new i.T8(r.xy,s,1),color:o,...this.maybeRunHittest(t,e,null)}}fragment(t){return this.getFragmentOutput(t.color,t,new i.bv(0))}hittest(t,e){return(0,a.CC)(this,t,e)}}(0,o._)([(0,r.Kw)(c.W)],p.prototype,"visualVariableColor",void 0),(0,o._)([(0,r.Kw)(l.V)],p.prototype,"visualVariableOpacity",void 0),(0,o._)([(0,o.a)(0,(0,r.qH)(d)),(0,o.a)(1,(0,r.qH)(s.RS))],p.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(s.fz))],p.prototype,"fragment",null)},16661:(t,e,n)=>{n.d(e,{Pf:()=>S,Wc:()=>w,b$:()=>g,fc:()=>v,tp:()=>m,uY:()=>x,zj:()=>_});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(17326),c=n(19812),l=n(14294),u=n(72328),d=n(48684),p=n(60064),h=n(9830),f=n(38694),y=n(10750);class m extends s.HN{}(0,o._)([(0,r.xh)(3,i.T8)],m.prototype,"color",void 0),(0,o._)([(0,r.xh)(4,i.Sg)],m.prototype,"offset",void 0),(0,o._)([(0,r.xh)(5,i.Sg)],m.prototype,"normal",void 0),(0,o._)([(0,r.xh)(6,i.bv)],m.prototype,"halfWidth",void 0),(0,o._)([(0,r.xh)(7,i.bv)],m.prototype,"referenceHalfWidth",void 0),(0,o._)([(0,r.xh)(8,i.Sg)],m.prototype,"zoomRange",void 0);class v extends s.fz{}class g extends r.oo{}function b(t){return(0,i.Fp)(new i.bv(a.Ay).multiply((0,i.Nb)(t,new i.bv(a.xp))),new i.bv(1))}function w(t,e){const{halfWidth:n,normal:o}=t,r=b(n),s=(0,i.kE)(o).multiply(n);return(0,i.uZ)(r.multiply(n.subtract(s)).divide(e.add(r).subtract(new i.bv(1))),new i.bv(0),new i.bv(1))}function x(t,e){const{id:n,offset:o,pos:r,normal:s,zoomRange:c}=e,{displayViewScreenMat3:l,displayViewMat3:u}=t.view,d=(0,y.Zt)(t,n,e.color),p=(0,y.sY)(t,n),h=function(t,e){const{id:n,halfWidth:o,referenceHalfWidth:r}=e;if((0,y.lA)(t)){const e=new i.bv(2).multiply(r),s=(0,y.Vm)(t,n,e);return new i.bv(.5).multiply(o.divide((0,i.Fp)(r,new i.bv(a.Ho)))).multiply(s)}return o}(t,e),f=new i.bv(.5).multiply(t.antialiasingControls.antialiasing),m=(0,i.Fp)(h.add(f),new i.bv(.45)).add(new i.bv(.1).multiply(f)),v=b(m).multiply(m).multiply(o),g=u.multiply(new i.AO(v,new i.bv(0))),w=l.multiply(new i.AO(r,new i.bv(1))).add(g),x=new i.bv(2).multiply((0,i.Nb)(h,new i.bv(0))).add(t.clip(n,c)),_=new i.T8(w.xy,x,1);return{color:d,opacity:p,halfWidth:m,normal:s,scaledOffset:v,scaledHalfWidth:h,glPosition:new i.T8(_.xy,x,1)}}function _(t,e){const{opacity:n,color:o}=t,r=w(t,e);return n.multiply(o).multiply(r)}(0,o._)([(0,r.e5)(i.bv)],g.prototype,"antialiasing",void 0),(0,o._)([(0,r.e5)(i.bv)],g.prototype,"blur",void 0);class S extends s.Ie{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const n=x(this,t);return{...n,...this.maybeRunHittest(t,e,n.halfWidth)}}fragment(t){const e=_(t,this.antialiasingControls.blur);return this.getFragmentOutput(e,t)}hittest(t,e,n){const{viewMat3:o,tileMat3:r}=this.view,s=o.multiply(r),a=s.multiply(new i.AO(t.pos,1)),l=s.multiply(new i.AO(e.nextPos1,1)),u=s.multiply(new i.AO(e.nextPos2,1)),{distance:d,smallSymbolDistance:p,smallSymbolSizeThreshold:h}=this.hittestRequest,f=(0,i.Nb)(n,h.multiply(.5)).multiply(d.subtract(p)),y=this.hittestRequest.position;return(0,i.VV)((0,c.bA)(y,a.xy,l.xy),(0,c.bA)(y,a.xy,u.xy)).subtract(n).add(f)}}(0,o._)([(0,r.e5)(g)],S.prototype,"antialiasingControls",void 0),(0,o._)([(0,r.Kw)(l.W)],S.prototype,"visualVariableColor",void 0),(0,o._)([(0,r.Kw)(u.V)],S.prototype,"visualVariableOpacity",void 0),(0,o._)([(0,r.Kw)(d.k)],S.prototype,"visualVariableSizeMinMaxValue",void 0),(0,o._)([(0,r.Kw)(p.U)],S.prototype,"visualVariableSizeScaleStops",void 0),(0,o._)([(0,r.Kw)(h.W)],S.prototype,"visualVariableSizeStops",void 0),(0,o._)([(0,r.Kw)(f.V)],S.prototype,"visualVariableSizeUnitValue",void 0),(0,o._)([(0,o.a)(0,(0,r.qH)(m)),(0,o.a)(1,(0,r.qH)(s.RS))],S.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(v))],S.prototype,"fragment",null)},23058:(t,e,n)=>{n.d(e,{H:()=>a});var o=n(27366),r=n(73325),i=n(52995),s=n(17326);class a extends r.oo{getPatternOffsetAtTileOrigin(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.bv(0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.bv(1);const o=new i.Sg(s.ad).divide(t);let r=t.multiply((0,i.ZI)(this.maxIntsToLocalOrigin.multiply(o))).add(this.tileOffsetFromLocalOrigin).subtract(new i.bv(.5).multiply(t));return r=new i.Sg(r.x.multiply(n).subtract(r.y.multiply(e)),r.x.multiply(e).add(r.y.multiply(n))),(0,i.wQ)(r,t)}}(0,o._)([(0,r.e5)(i.Sg)],a.prototype,"tileOffsetFromLocalOrigin",void 0),(0,o._)([(0,r.e5)(i.Sg)],a.prototype,"maxIntsToLocalOrigin",void 0)},31571:(t,e,n)=>{n.d(e,{N:()=>s});var o=n(27366),r=n(73325),i=n(52995);class s extends r.oo{}(0,o._)([(0,r.e5)(i.Sg)],s.prototype,"size",void 0),(0,o._)([(0,r.e5)(i.Eg)],s.prototype,"texture",void 0)},48156:(t,e,n)=>{n.d(e,{N8:()=>g,R0:()=>w,VV:()=>x,jt:()=>b,py:()=>_});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(17326),c=n(19812),l=n(16661),u=n(34130),d=n(14294),p=n(72328),h=n(48684),f=n(60064),y=n(9830),m=n(38694),v=n(10750);class g extends s.HN{}(0,o._)([(0,r.xh)(3,i.Sg)],g.prototype,"offset",void 0),(0,o._)([(0,r.xh)(4,i.T8)],g.prototype,"color",void 0),(0,o._)([(0,r.xh)(5,i.Sg)],g.prototype,"normal",void 0),(0,o._)([(0,r.xh)(6,i.bv)],g.prototype,"halfWidth",void 0),(0,o._)([(0,r.xh)(7,i.bv)],g.prototype,"referenceHalfWidth",void 0),(0,o._)([(0,r.xh)(8,i.Sg)],g.prototype,"zoomRange",void 0);class b extends l.fc{}function w(t,e,n){const{id:o,bitset:r}=e,s=(0,u.qD)(r,a.WD),c=(0,i.tS)(s,new i.bv(.5)),d=(0,l.uY)(t,e),p=(0,i.KJ)(c,d.halfWidth,new i.bv(0)),h=(0,v.sY)(t,o),f=(0,v.Zt)(t,o,e.color),y=(0,i.KJ)(c,e.color,f.multiply(h)),m=t.view.displayViewScreenMat3.multiply(new i.AO(e.pos.xy,1)),g=t.clip(e.id),b=new i.T8(m.xy,g,1),w=(0,i.KJ)(c,d.glPosition,b),x=n&&t.maybeRunHittest(e,n,c);return{isOutline:s,color:y,opacity:new i.bv(1),halfWidth:p,normal:d.normal,glPosition:w,...x}}class x extends s.Ie{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}(0,o._)([(0,r.e5)(l.b$)],x.prototype,"antialiasingControls",void 0),(0,o._)([(0,r.Kw)(d.W)],x.prototype,"visualVariableColor",void 0),(0,o._)([(0,r.Kw)(p.V)],x.prototype,"visualVariableOpacity",void 0),(0,o._)([(0,r.Kw)(h.k)],x.prototype,"visualVariableSizeMinMaxValue",void 0),(0,o._)([(0,r.Kw)(f.U)],x.prototype,"visualVariableSizeScaleStops",void 0),(0,o._)([(0,r.Kw)(y.W)],x.prototype,"visualVariableSizeStops",void 0),(0,o._)([(0,r.Kw)(m.V)],x.prototype,"visualVariableSizeUnitValue",void 0);class _ extends x{vertex(t,e){return w(this,t,e)}fragment(t){const{color:e,isOutline:n}=t,o=(0,i.tS)(n,new i.bv(.5)),r=(0,l.zj)(t,this.antialiasingControls.blur),s=(0,i.KJ)(o,r,e),a=(0,i.KJ)(o,new i.bv(1/255),new i.bv(0));return this.getFragmentOutput(s,t,a)}hittest(t,e,n){return(0,i.KJ)(n,(0,c.Oz)(this.hittestRequest),(0,c.CC)(this,t,e))}}(0,o._)([(0,o.a)(0,(0,r.qH)(g)),(0,o.a)(1,(0,r.qH)(s.RS))],_.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(b))],_.prototype,"fragment",null)},44405:(t,e,n)=>{n.d(e,{DS:()=>h,Qp:()=>p,lA:()=>f});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(93787),c=n(23058),l=n(31571);class u extends a.F{}(0,o._)([(0,r.xh)(5,i.T8)],u.prototype,"tlbr",void 0),(0,o._)([(0,r.xh)(6,i.bv)],u.prototype,"inverseRasterizationScale",void 0);class d extends s.fz{}function p(t,e){const n=e.tlbr.xy,o=e.tlbr.zw,r=o.x.subtract(n.x),s=n.y.subtract(o.y),a=new i.Sg(r,s).multiply(e.inverseRasterizationScale),c=a.multiply(t.view.requiredZoomFactor),l=function(t){const e=new i.bv(1),n=new i.bv(0);return new i.Tu(e.divide(t.x),n.divide(t.y),0,(0,i.tk)(n.divide(t.x)),e.divide(t.y),0,0,0,1)}(c),u=t.localTileOffset.getPatternOffsetAtTileOrigin(a).divide(c),d=new i.AO(e.pos,1);return{tileTextureCoord:l.multiply(d).xy.subtract(u),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function h(t,e){const n=(0,i.wQ)(t.tileTextureCoord,new i.bv(1)),o=(0,i.CD)(t.tlbr.xy,t.tlbr.zw,n),r=(0,i.ig)(e.texture,o);return t.color.multiply(r)}class f extends a.C{vertex(t,e){return{...super.vertex(t,e),...p(this,t)}}fragment(t){const e=h(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new i.bv(0))}}(0,o._)([(0,r.e5)(l.N)],f.prototype,"mosaicInfo",void 0),(0,o._)([(0,r.e5)(c.H)],f.prototype,"localTileOffset",void 0),(0,o._)([(0,o.a)(0,(0,r.qH)(u)),(0,o.a)(1,(0,r.qH)(s.RS))],f.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(d))],f.prototype,"fragment",null)},44461:(t,e,n)=>{n.d(e,{K7:()=>h,Zd:()=>f});var o=n(27366),r=n(73325),i=n(52995),s=n(15135),a=n(16661),c=n(23058),l=n(31571),u=n(48156),d=n(44405);class p extends u.N8{}(0,o._)([(0,r.xh)(9,i.T8)],p.prototype,"tlbr",void 0),(0,o._)([(0,r.xh)(10,i.bv)],p.prototype,"inverseRasterizationScale",void 0);class h extends u.jt{}class f extends u.py{vertex(t,e){return{...(0,u.R0)(this,t,e),...(0,d.Qp)(this,t)}}fragment(t){const{isOutline:e}=t,n=(0,i.tS)(e,new i.bv(.5)),o=(0,a.zj)(t,this.antialiasingControls.blur),r=(0,d.DS)(t,this.mosaicInfo),s=(0,i.KJ)(n,o,r),c=(0,i.KJ)(n,new i.bv(1/255),new i.bv(0));return this.getFragmentOutput(s,t,c)}}(0,o._)([(0,r.e5)(l.N)],f.prototype,"mosaicInfo",void 0),(0,o._)([(0,r.e5)(c.H)],f.prototype,"localTileOffset",void 0),(0,o._)([(0,o.a)(0,(0,r.qH)(p)),(0,o.a)(1,(0,r.qH)(s.RS))],f.prototype,"vertex",null),(0,o._)([(0,o.a)(0,(0,r.qH)(h))],f.prototype,"fragment",null)},31060:(t,e,n)=>{n.d(e,{C:()=>s});var o=n(27366),r=n(73325),i=n(52995);class s extends r.oo{}(0,o._)([(0,r.e5)(i.Tu)],s.prototype,"displayViewScreenMat3",void 0),(0,o._)([(0,r.e5)(i.Tu)],s.prototype,"displayViewMat3",void 0),(0,o._)([(0,r.e5)(i.Tu)],s.prototype,"displayMat3",void 0),(0,o._)([(0,r.e5)(i.Tu)],s.prototype,"viewMat3",void 0),(0,o._)([(0,r.e5)(i.Tu)],s.prototype,"tileMat3",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"displayZoomFactor",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"requiredZoomFactor",void 0),(0,o._)([(0,r.e5)(i.Sg)],s.prototype,"tileOffset",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"currentScale",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"currentZoom",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"metersPerSRUnit",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"rotation",void 0),(0,o._)([(0,r.e5)(i.bv)],s.prototype,"pixelRatio",void 0)},14294:(t,e,n)=>{n.d(e,{W:()=>a});var o=n(27366),r=n(73325),i=n(52995),s=n(34130);class a extends r.oo{getColor(t,e,n){return(0,i.wV)([(0,i.or)((0,s.In)(t),n),e],[(0,i.Iz)(t,this.values.first()),this.colors.first()],[(0,i.r7)(t,this.values.last()),this.colors.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,i.tS)(e,t))),n=this.values.get(e),o=e.subtract(1),r=this.values.get(o),s=t.subtract(r).divide(n.subtract(r));return(0,i.CD)(this.colors.get(o),this.colors.get(e),s)}])}}(0,o._)([(0,r.e5)(i.v8.ofType(i.T8,8))],a.prototype,"colors",void 0),(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],a.prototype,"values",void 0)},72328:(t,e,n)=>{n.d(e,{V:()=>a});var o=n(27366),r=n(73325),i=n(52995),s=n(34130);class a extends r.oo{getOpacity(t){return(0,i.wV)([(0,s.In)(t),new i.bv(1)],[(0,i.Iz)(t,this.opacityValues.first()),this.opacities.first()],[(0,i.r7)(t,this.opacityValues.last()),this.opacities.last()],[!0,()=>{const e=this.opacityValues.findIndex((e=>(0,i.tS)(e,t))),n=this.opacityValues.get(e),o=e.subtract(1),r=this.opacityValues.get(o),s=t.subtract(r).divide(n.subtract(r));return(0,i.CD)(this.opacities.get(o),this.opacities.get(e),s)}])}}(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],a.prototype,"opacities",void 0),(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],a.prototype,"opacityValues",void 0)},48684:(t,e,n)=>{n.d(e,{k:()=>a});var o=n(27366),r=n(73325),i=n(52995),s=n(34130);class a extends r.oo{getSize(t,e){const n=this.minMaxValueAndSize.xy,o=this.minMaxValueAndSize.zw;return(0,i.KJ)((0,s.In)(t),e,(()=>{const e=t.subtract(n.x).divide(n.y.subtract(n.x)),r=(0,i.uZ)(e,new i.bv(0),new i.bv(1));return o.x.add(r.multiply(o.y.subtract(o.x)))}))}}(0,o._)([(0,r.e5)(i.T8)],a.prototype,"minMaxValueAndSize",void 0)},60064:(t,e,n)=>{n.d(e,{U:()=>s});var o=n(27366),r=n(73325),i=n(52995);class s extends r.oo{getSizeForViewScale(t){return(0,i.wV)([(0,i.Iz)(t,this.values.first()),this.sizes.first()],[(0,i.r7)(t,this.values.last()),this.sizes.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,i.tS)(e,t))),n=this.values.get(e),o=e.subtract(1),r=this.values.get(o),s=t.subtract(r).divide(n.subtract(r));return(0,i.CD)(this.sizes.get(o),this.sizes.get(e),s)}])}}(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],s.prototype,"sizes",void 0),(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],s.prototype,"values",void 0)},9830:(t,e,n)=>{n.d(e,{W:()=>a});var o=n(27366),r=n(73325),i=n(52995),s=n(34130);class a extends r.oo{getSize(t,e){const n=(0,i.wV)([(0,s.In)(t),e],[(0,i.Iz)(t,this.values.first()),this.sizes.first()],[(0,i.r7)(t,this.values.last()),this.sizes.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,i.tS)(e,t))),n=this.values.get(e),o=e.subtract(1),r=this.values.get(o),s=t.subtract(r).divide(n.subtract(r));return(0,i.CD)(this.sizes.get(o),this.sizes.get(e),s)}]);return(0,i.KJ)((0,s.In)(n),e,n)}}(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],a.prototype,"sizes",void 0),(0,o._)([(0,r.e5)(i.v8.ofType(i.bv,8))],a.prototype,"values",void 0)},38694:(t,e,n)=>{n.d(e,{V:()=>a});var o=n(27366),r=n(73325),i=n(52995),s=n(34130);class a extends r.oo{getSize(t,e){return(0,i.KJ)((0,s.In)(t),e,t.multiply(this.unitValueToPixelsRatio))}}(0,o._)([(0,r.e5)(i.bv)],a.prototype,"unitValueToPixelsRatio",void 0)},17326:(t,e,n)=>{var o;n.d(e,{$r:()=>w,Ay:()=>a,B7:()=>g,GS:()=>f,Ho:()=>d,Ke:()=>u,MO:()=>o,T5:()=>p,Ux:()=>m,V_:()=>l,WD:()=>y,Wq:()=>v,ad:()=>x,e4:()=>i,h:()=>_,k9:()=>h,mL:()=>b,nF:()=>r,nU:()=>s,xp:()=>c}),function(t){t[t.Geographic=0]="Geographic",t[t.Arithmatic=1]="Arithmatic"}(o||(o={}));const r=3.14159265359/180,i=3.14159265359/128,s=1,a=1.1,c=1,l=24,u=8,d=1e-5,p=.05,h=1e-30,f=4,y=0,m=2,v=2,g=3,b=0,w=3,x=16777216,_=1.1},19812:(t,e,n)=>{n.d(e,{CC:()=>p,Oz:()=>d,P0:()=>u,XM:()=>h,bA:()=>s,hF:()=>c,lD:()=>a});var o=n(52995),r=n(17326),i=n(34130);function s(t,e,n){const r=n.subtract(e),i=function(t,e){return(0,o.AK)(t,(0,o.Fv)(e))}(t.subtract(e),r),s=(0,o.uZ)(i.divide((0,o.kE)(r)),new o.bv(0),new o.bv(1));return(0,o.TE)(t,e.add(s.multiply(n.subtract(e))))}function a(t){const e=(0,o.Wn)(t);return(0,o.Nb)(e.x.add(e.y).add(e.z),new o.bv(1.05))}function c(t,e,n,r){const i=new o.Tu(n.x.multiply(r.y).subtract(r.x.multiply(n.y)),r.x.multiply(e.y).subtract(e.x.multiply(r.y)),e.x.multiply(n.y).subtract(n.x.multiply(e.y)),n.y.subtract(r.y),r.y.subtract(e.y),e.y.subtract(n.y),r.x.subtract(n.x),e.x.subtract(r.x),n.x.subtract(e.x)),s=e.x.multiply(n.y.subtract(r.y)),a=n.x.multiply(r.y.subtract(e.y)),c=r.x.multiply(e.y.subtract(n.y)),l=s.add(a).add(c);return new o.bv(1).divide(l).multiply(i.multiply(new o.AO(1,t)))}function l(t,e,n,r){return(0,o.ln)(a(c(t,e,n,r)),new o.bv(1))}function u(t,e,n,a){const c=n.subtract(e),u=a.subtract(e),d=(0,i.xQ)(c,u),p=(0,o.xD)((0,o.Qj)(d,new o.bv(r.T5)),(0,o.tS)(d,new o.bv(-r.T5)));return(0,o.wV)([(0,o.xD)((0,o.ff)(p),l(t.xy,e,n,a)),new o.bv(-1)],[!0,()=>{const r=s(t,e,n),i=s(t,n,a),c=s(t,a,e);return(0,o.VV)((0,o.VV)(r,i),c)}])}function d(t){return t.distance.add(1)}function p(t,e,n){const{viewMat3:r,tileMat3:i}=t.view,s=r.multiply(i),a=s.multiply(new o.AO(e.pos,1)),c=s.multiply(new o.AO(n.nextPos1,1)),l=s.multiply(new o.AO(n.nextPos2,1));return u(t.hittestRequest.position,a.xy,c.xy,l.xy)}function h(t,e,n){return(0,o.TE)(t,n).subtract(e)}},34130:(t,e,n)=>{n.d(e,{Fn:()=>b,In:()=>a,JH:()=>y,RZ:()=>v,TN:()=>s,Wv:()=>f,X3:()=>m,bG:()=>p,eO:()=>g,h7:()=>d,hG:()=>h,pK:()=>l,qD:()=>u,xQ:()=>c});var o=n(94109),r=n(52995),i=n(17326);function s(t){const e=(0,r.fz)(12.9898),n=(0,r.fz)(78.233),o=(0,r.fz)(43758.5453),i=(0,r.AK)(t,(0,r.K4)(e,n)),s=(0,r.wQ)(i,(0,r.fz)(3.14));return(0,r.ZI)((0,r.O$)(s).multiply(o))}function a(t){return(0,r.ln)(t,(0,r.fz)(i.k9))}function c(t,e){return t.x.multiply(e.y).subtract(e.x.multiply(t.y))}function l(t){return t.multiply(2).subtract(1)}function u(t,e){const n=(0,r.fz)(2**e);return(0,r.wQ)((0,r.GW)(t.divide(n)),(0,r.fz)(2))}function d(t,e){return(0,r.tS)(u(t,e),(0,r.fz)(.5))}function p(t,e){return u(t,e+o.IZ)}function h(t,e){return u(t,e)}function f(t){const e=u(t.z,7),n=(0,r.fz)(1).subtract(e),o=t.xyz.subtract((0,r.R3)(0,0,(0,r.fz)(128)));return n.multiply(t).add(e.multiply(o))}function y(t){const e=(0,r.vh)(255/256,255/65536,255/16777216,255/4294967296);return(0,r.AK)(t,e)}function m(t){return(0,r.Fp)((0,r.Fp)((0,r.Fp)(t.x,t.y),t.z),t.w)}function v(t){return new r.bv(1).subtract(t)}function g(t){return t.subtract(new r.bv(1))}function b(t,e){return t.subtract(new r.bv(e))}},10750:(t,e,n)=>{n.d(e,{H8:()=>c,Vm:()=>i,Zt:()=>s,lA:()=>r,pF:()=>l,sY:()=>a});var o=n(52995);function r(t){return null!=t.visualVariableSizeMinMaxValue||null!=t.visualVariableSizeScaleStops||null!=t.visualVariableSizeStops||null!=t.visualVariableSizeUnitValue}function i(t,e,n){if(r(t)){var o,i,s,a,c,l,u;const r=t.storage.getSizeValue(e);return null!==(o=null!==(i=null!==(s=null===(a=t.visualVariableSizeMinMaxValue)||void 0===a?void 0:a.getSize(r,n))&&void 0!==s?s:null===(c=t.visualVariableSizeScaleStops)||void 0===c?void 0:c.getSizeForViewScale(t.view.currentScale))&&void 0!==i?i:null===(l=t.visualVariableSizeStops)||void 0===l?void 0:l.getSize(r,n))&&void 0!==o?o:null===(u=t.visualVariableSizeUnitValue)||void 0===u?void 0:u.getSize(r,n)}return n}function s(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.tW(!1);if(null==t.visualVariableColor)return n;const i=t.storage.getColorValue(e);return t.visualVariableColor.getColor(i,n,r)}function a(t,e){if(null==t.visualVariableOpacity)return new o.bv(1);const n=t.storage.getOpacityValue(e);return t.visualVariableOpacity.getOpacity(n)}function c(t,e){if(null==t.visualVariableRotation)return o.Tu.identity();const n=t.storage.getRotationValue(e);return t.visualVariableRotation.getVVRotationMat3(n)}function l(t,e){if(null==t.visualVariableRotation)return new o.bv(0);const n=t.storage.getRotationValue(e);return t.visualVariableRotation.getNormalizedAngle(n)}},19407:(t,e,n)=>{n.d(e,{X:()=>l});var o=n(10064),r=n(32718),i=n(18202),s=(n(84936),n(93169),n(37825),n(8548),n(53634),n(47428)),a=(n(46888),n(51378),n(84319));function c(t,e,n){const i=e.length;if(i!==n){const s=new o.Z("Invalid Uniform","Invalid length, expected ".concat(n," but got ").concat(i),{uniformName:t,values:e});r.Z.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram").errorOnce(s)}}class l{constructor(t,e,n,o,r,i){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=t,this.fragmentShader=e,this._locations=n,this._locationInfo=o,this._uniformBindings=r,this._transformFeedbackBindings=i}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(t){this._uniforms=t}cleanupTemporaryTextures(){for(const t of this._temporaryTextures)t.dispose();this._temporaryTextures=[]}bind(t){const e=this._uniforms;if(!this._program){const e=new Map;for(const[t,n]of this._locations)e.set(t,n);const o=[];for(const t of null!==(n=this._transformFeedbackBindings)&&void 0!==n?n:[]){var n;const{index:e,propertyKey:r}=t;o[e]="v_".concat(r)}this._program=new s.$(t,this.vertexShader,this.fragmentShader,e,new Map,o)}const o=this._program;t.useProgram(o);for(const r of this._uniformBindings){const{shaderModulePath:n,uniformName:s,uniformType:l,uniformArrayLength:u}=r,d=(0,i.hS)(n,e);if(null==d){if("sampler2D"===l)continue;throw new Error("Failed to find uniform value for ".concat(n))}switch("array"===l?r.uniformArrayElementType:l){case"sampler2D":{const{unit:e,texture:n}=d;if(o.setUniform1i(s,e),"type"in n)t.bindTexture(n,e);else{const o=(0,a.cU)(t,n.descriptor,n.data);t.bindTexture(o,e)}break}case"int":if(!u){o.setUniform1i(s,d);break}c(r.uniformName,d,u),o.setUniform1iv(s,d);break;case"float":if(!u){o.setUniform1f(s,d);break}c(r.uniformName,d,u),o.setUniform1fv(s,d);break;case"vec2":if(!u){o.setUniform2f(s,d[0],d[1]);break}c(r.uniformName,d,u),o.setUniform2fv(s,d.flat());break;case"vec3":if(!u){o.setUniform3f(s,d[0],d[1],d[2]);break}c(r.uniformName,d,u),o.setUniform3fv(s,d.flat());break;case"vec4":if(!u){o.setUniform4f(s,d[0],d[1],d[2],d[3]);break}c(r.uniformName,d,u),o.setUniform4fv(s,d.flat());break;case"mat3":o.setUniformMatrix3fv(s,d);break;case"mat4":o.setUniformMatrix4fv(s,d);break;default:throw new Error("Unable to set uniform for type ".concat(l))}}}}},79004:(t,e,n)=>{n.d(e,{x:()=>d});var o=n(27366),r=n(7138),i=n(93169),s=n(18442),a=n(94172),c=n(49861),l=(n(32718),n(84936),n(69912)),u=n(46634);let d=class extends r.Z{constructor(t){super(t),this.debugName="",this._updatingHandles=new u.R,this._idToUpdatingState=new s.Z}get updating(){const t=this._updatingHandles.updating||Array.from(this._idToUpdatingState.values()).some((t=>t));if((0,i.Z)("esri-2d-log-updating")){const e=Array.from(this._idToUpdatingState.entries()).map((t=>{let[e,n]=t;return"-> ".concat(e,": ").concat(n)})).join("\n");console.log("".concat(this.debugName,": Updating: ").concat(t,"\n-> Handles: ").concat(this._updatingHandles.updating,"\n").concat(e))}return t}addUpdateTracking(t,e){const n=(0,a.YP)((()=>e.updating),(e=>this._idToUpdatingState.set(t,e)),{sync:!0});this.addHandles(n)}addPromise(t){return this._updatingHandles.addPromise(t)}};(0,o._)([(0,c.Cb)({constructOnly:!0})],d.prototype,"debugName",void 0),(0,o._)([(0,c.Cb)({readOnly:!0})],d.prototype,"updating",null),d=(0,o._)([(0,l.j)("esri.views.2d.layers.support.UpdateTracking2D")],d)},99340:(t,e,n)=>{var o;n.d(e,{P:()=>o}),function(t){t[t.Pass=0]="Pass",t[t.Draw=1]="Draw"}(o||(o={}))},97731:(t,e,n)=>{n.d(e,{hu:()=>r,yK:()=>i});n(6644),n(19093);(0,n(86361).Ue)();class o{constructor(t){this.message=t}toString(){return"AssertException: ".concat(this.message)}}function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion";if(!t){const t=new Error(e).stack;throw new o("".concat(e," at ").concat(t))}}function i(t,e,n,o){let r,i=(n[0]-t[0])/e[0],s=(o[0]-t[0])/e[0];i>s&&(r=i,i=s,s=r);let a=(n[1]-t[1])/e[1],c=(o[1]-t[1])/e[1];if(a>c&&(r=a,a=c,c=r),i>c||a>s)return!1;a>i&&(i=a),c<s&&(s=c);let l=(n[2]-t[2])/e[2],u=(o[2]-t[2])/e[2];return l>u&&(r=l,l=u,u=r),!(i>u||l>s)&&(u<s&&(s=u),!(s<0))}}}]);
//# sourceMappingURL=2720.807249da.chunk.js.map